{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAeC,SAASC,cAAc,mBACtCC,EAAYF,SAASC,cAAc,eACnCE,EAAgBH,SAASC,cAAc,iBACvCG,EAAYJ,SAASC,cAAc,oBACnCI,EAAc,IAAI,EAAAR,EAAAS,aAiFlBC,EAAc,WAKlB,OAJiB,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,K,EAKlBZ,EAAaa,iBAAiB,UAvFHC,MAAMC,IAC/BA,EAAMC,iBAENV,EAAYW,MAAQZ,EAAUa,MAC9BZ,EAAYa,KAAO,EAEnB,IACE,MAAMC,QAAiBd,EAAYe,qBAEjC,GAAkC,IAA9BD,EAASE,KAAKC,KAAKC,OASrB,OAPAf,EAAAgB,GAASC,OAAOC,KAAK,4EAErBxB,EAAUyB,UAAY,GAEtBxB,EAAcyB,UAAUC,IAAI,kBAE5Bf,EAAMgB,OAAOC,QAIf,GAAGZ,EAASE,KAAKC,KAAKC,OAASlB,EAAY2B,SAWzC,OATA7B,EAAcyB,UAAUC,IAAI,aAE5B3B,EAAUyB,WAAY,EAAAM,EAAAC,SAAmBf,EAASE,KAAKC,MAEvDf,SAEAC,EAAAgB,GAASC,OAAOU,QAAQ,6DAA8D,CACpFC,QAAS,MAKblC,EAAUyB,WAAY,EAAAM,EAAAC,SAAmBf,EAASE,KAAKC,MAEvDf,IAEAJ,EAAcyB,UAAUS,OAAO,aAE/B7B,EAAAgB,GAASC,OAAOa,QAAQ,oBAAoBnB,EAASE,KAAKkB,8BAA+B,CACvFH,QAAS,K,CAGX,MAAMI,GACNC,QAAQC,IAAIF,E,KA0ClBrC,EAAcS,iBAAiB,SAtCJC,MAAMC,IAC/BT,EAAYa,MAAQ,EAEpB,IACE,MAAMC,QAAiBd,EAAYe,qBAEjC,GAAID,EAASE,KAAKkB,WAAalC,EAAY2B,SAAS3B,EAAYa,KAW9D,OATAhB,EAAUyC,mBAAmB,aAAa,EAAAV,EAAAC,SAAmBf,EAASE,KAAKC,OAE3Ef,IAEAJ,EAAcyB,UAAUC,IAAI,kBAE5BrB,EAAAgB,GAASC,OAAOC,KAAK,6DAA8D,CACjFU,QAAS,MAKblC,EAAUyC,mBAAmB,aAAa,EAAAV,EAAAC,SAAmBf,EAASE,KAAKC,OAE3Ef,G,CAEA,MAAMiC,GACNC,QAAQC,IAAIF,E","sources":["src/js/gallery.js"],"sourcesContent":["import { UnsplashAPI } from './unsplash-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst userInput = document.querySelector('.js-search-input');\nconst unsplashAPI = new UnsplashAPI();\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  unsplashAPI.query = userInput.value;\n  unsplashAPI.page = 1;\n\n  try { \n    const response = await unsplashAPI.fetchPhotosByQuery();\n\n      if (response.data.hits.length === 0) { //Якщо не коректний запрос повертаэться масив з length = 0, тоді очищаємо форму, ховаємо кнопку, очищуємо Input\n        \n        Notiflix.Notify.info(\"Sorry, there are no images matching your search query. Please try again.\");\n\n        galleryEl.innerHTML = ''; \n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        event.target.reset();\n        return;\n      }\n\n      if(response.data.hits.length < unsplashAPI.per_page) {\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        galleryEl.innerHTML = createGalleryCards(response.data.hits);\n\n        modalWindow();\n\n        Notiflix.Notify.failure(\"We're sorry, but you've reached the end of search results.\", {\n          timeout: 3000,\n        });\n        return;\n      }\n\n      galleryEl.innerHTML = createGalleryCards(response.data.hits);\n\n      modalWindow();\n\n      loadMoreBtnEl.classList.remove('is-hidden');\n\n      Notiflix.Notify.success(`Hooray! We found ${response.data.totalHits} totalHits images.`, {\n        timeout: 3000,\n      },);\n\n    } catch(err) {\n      console.log(err);\n    };\n};\n\nconst onLoadMoreBtnClick = async event => {\n  unsplashAPI.page += 1;\n\n  try {\n    const response = await unsplashAPI.fetchPhotosByQuery();\n\n      if (response.data.totalHits <= unsplashAPI.per_page*unsplashAPI.page) {\n\n        galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(response.data.hits));\n\n        modalWindow();\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\", {\n          timeout: 3000,\n        }, );\n        return;\n      }\n      \n      galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(response.data.hits));\n\n      modalWindow();\n\n    } catch(err) {\n      console.log(err);\n    };\n};\n\nconst modalWindow = function() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 300,\n  });\n  return lightbox;\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["$dxBSg","parcelRequire","$7c59f4ec4043ce00$var$searchFormEl","document","querySelector","$7c59f4ec4043ce00$var$galleryEl","$7c59f4ec4043ce00$var$loadMoreBtnEl","$7c59f4ec4043ce00$var$userInput","$7c59f4ec4043ce00$var$unsplashAPI","UnsplashAPI","$7c59f4ec4043ce00$var$modalWindow","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","addEventListener","async","event","preventDefault","query","value","page","response","fetchPhotosByQuery","data","hits","length","$eWCmQ","Notify","info","innerHTML","classList","add","target","reset","per_page","$cdIRi","default","failure","timeout","remove","success","totalHits","err","console","log","insertAdjacentHTML"],"version":3,"file":"index.7d3d59ac.js.map"}