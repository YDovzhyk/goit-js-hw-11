{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAeC,SAASC,cAAc,mBACtCC,EAAYF,SAASC,cAAc,eACnCE,EAAgBH,SAASC,cAAc,iBACvCG,EAAYJ,SAASC,cAAc,oBACnCI,EAAc,IAAI,EAAAR,EAAAS,aAmFlBC,EAAc,WAKlB,OAJiB,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,K,EAKlB,SAASC,IACP,MAAQC,OAAQC,GAAed,SAC9BC,cAAc,YACdc,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CAIZrB,EAAasB,iBAAiB,UApGHC,MAAMC,IAC/BA,EAAMC,iBAENnB,EAAYoB,MAAQrB,EAAUsB,MAC9BrB,EAAYsB,KAAO,EAEnB,IACE,MAAMC,QAAiBvB,EAAYwB,qBAEjC,GAAkC,IAA9BD,EAASE,KAAKC,KAAKC,OASrB,OAPAxB,EAAAyB,GAASC,OAAOC,KAAK,4EAErBjC,EAAUkC,UAAY,GAEtBjC,EAAckC,UAAUC,IAAI,kBAE5Bf,EAAMgB,OAAOC,QAIf,GAAGZ,EAASE,KAAKC,KAAKC,OAAS3B,EAAYoC,SAWzC,OATAtC,EAAckC,UAAUC,IAAI,aAE5BpC,EAAUkC,WAAY,EAAAM,EAAAC,SAAmBf,EAASE,KAAKC,MAEvDxB,SAEAC,EAAAyB,GAASC,OAAOU,QAAQ,6DAA8D,CACpFC,QAAS,MAKb3C,EAAUkC,WAAY,EAAAM,EAAAC,SAAmBf,EAASE,KAAKC,MAEvDnB,IACAL,IAEAJ,EAAckC,UAAUS,OAAO,aAE/BtC,EAAAyB,GAASC,OAAOa,QAAQ,oBAAoBnB,EAASE,KAAKkB,8BAA+B,CACvFH,QAAS,K,CAGX,MAAMI,GACNC,QAAQC,IAAIF,E,KAsDlB9C,EAAckB,iBAAiB,SAlDJC,MAAMC,IAC/BlB,EAAYsB,MAAQ,EAEpB,IACE,MAAMC,QAAiBvB,EAAYwB,qBAEjC,GAAID,EAASE,KAAKkB,WAAa3C,EAAYoC,SAASpC,EAAYsB,KAW9D,OATAzB,EAAUkD,mBAAmB,aAAa,EAAAV,EAAAC,SAAmBf,EAASE,KAAKC,OAE3ExB,IAEAJ,EAAckC,UAAUC,IAAI,kBAE5B9B,EAAAyB,GAASC,OAAOC,KAAK,6DAA8D,CACjFU,QAAS,MAKb3C,EAAUkD,mBAAmB,aAAa,EAAAV,EAAAC,SAAmBf,EAASE,KAAKC,OAE3EnB,IACAL,G,CAEA,MAAM0C,GACNC,QAAQC,IAAIF,E","sources":["src/js/gallery.js"],"sourcesContent":["import { UnsplashAPI } from './unsplash-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst userInput = document.querySelector('.js-search-input');\nconst unsplashAPI = new UnsplashAPI();\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  unsplashAPI.query = userInput.value;\n  unsplashAPI.page = 1;\n\n  try { \n    const response = await unsplashAPI.fetchPhotosByQuery();\n\n      if (response.data.hits.length === 0) { //Якщо не коректний запрос повертаэться масив з length = 0, тоді очищаємо форму, ховаємо кнопку, очищуємо Input\n        \n        Notiflix.Notify.info(\"Sorry, there are no images matching your search query. Please try again.\");\n\n        galleryEl.innerHTML = ''; \n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        event.target.reset();\n        return;\n      }\n\n      if(response.data.hits.length < unsplashAPI.per_page) {\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        galleryEl.innerHTML = createGalleryCards(response.data.hits);\n\n        modalWindow();\n\n        Notiflix.Notify.failure(\"We're sorry, but you've reached the end of search results.\", {\n          timeout: 3000,\n        });\n        return;\n      }\n\n      galleryEl.innerHTML = createGalleryCards(response.data.hits);\n\n      scrollOnButton();\n      modalWindow();\n\n      loadMoreBtnEl.classList.remove('is-hidden');\n\n      Notiflix.Notify.success(`Hooray! We found ${response.data.totalHits} totalHits images.`, {\n        timeout: 3000,\n      },);\n\n    } catch(err) {\n      console.log(err);\n    };\n};\n\nconst onLoadMoreBtnClick = async event => {\n  unsplashAPI.page += 1;\n\n  try {\n    const response = await unsplashAPI.fetchPhotosByQuery();\n\n      if (response.data.totalHits <= unsplashAPI.per_page*unsplashAPI.page) {\n\n        galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(response.data.hits));\n\n        modalWindow();\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\", {\n          timeout: 3000,\n        }, );\n        return;\n      }\n      \n      galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(response.data.hits));\n\n      scrollOnButton();\n      modalWindow();\n\n    } catch(err) {\n      console.log(err);\n    };\n};\n\nconst modalWindow = function() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 300,\n  });\n  return lightbox;\n};\n\nfunction scrollOnButton() {\n  const { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["$dxBSg","parcelRequire","$7c59f4ec4043ce00$var$searchFormEl","document","querySelector","$7c59f4ec4043ce00$var$galleryEl","$7c59f4ec4043ce00$var$loadMoreBtnEl","$7c59f4ec4043ce00$var$userInput","$7c59f4ec4043ce00$var$unsplashAPI","UnsplashAPI","$7c59f4ec4043ce00$var$modalWindow","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","$7c59f4ec4043ce00$var$scrollOnButton","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","addEventListener","async","event","preventDefault","query","value","page","response","fetchPhotosByQuery","data","hits","length","$eWCmQ","Notify","info","innerHTML","classList","add","target","reset","per_page","$cdIRi","default","failure","timeout","remove","success","totalHits","err","console","log","insertAdjacentHTML"],"version":3,"file":"index.7659a156.js.map"}