{"mappings":"iiBAAA,I,EAAAA,EAAAC,EAAA,S,iEAMMC,EAAeC,SAASC,cAAc,mBACtCC,EAAYF,SAASC,cAAc,eACnCE,EAAgBH,SAASC,cAAc,iBACvCG,EAAYJ,SAASC,cAAc,oBACnCI,EAAc,IAAI,EAAAC,EAAAC,aAElBC,G,EAAqBC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAOvBC,E,yEANRD,EAAME,iBAENV,EAAYW,MAAQZ,EAAUa,MAC9BZ,EAAYa,KAAO,E,kBAGMb,EAAYc,qB,UAEC,KAF9BL,EAAQM,EAAAC,MAECC,KAAKC,KAAKC,OAAY,C,uBAEjCf,EAAAgB,GAASC,OAAOC,KAAK,4EAErBzB,EAAU0B,UAAY,GAEtBzB,EAAc0B,UAAUC,IAAI,aAE5BjB,EAAMkB,OAAOC,Q,gCAIZlB,EAASQ,KAAKC,KAAKC,OAASnB,EAAY4B,UAAQ,C,uBAEjD9B,EAAc0B,UAAUC,IAAI,aAE5B5B,EAAU0B,WAAY,EAAAM,EAAAC,SAAmBrB,EAASQ,KAAKC,MAEvDa,IAEA3B,EAAAgB,GAASC,OAAOW,QAAQ,6DAA8D,CACpFC,QAAS,M,2BAKbpC,EAAU0B,WAAY,EAAAM,EAAAC,SAAmBrB,EAASQ,KAAKC,MAsD5BgB,SAAvBC,SAAuBD,EAAAvC,SAC9BC,cAAc,YACdwC,kBAAkBC,wBAFXF,EAAuBD,EAAvBI,OAIVC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,WAzDNX,IAEAjC,EAAc0B,UAAUmB,OAAO,aAE/BvC,EAAAgB,GAASC,OAAOuB,QAAQ,oBAA4CC,OAAxBpC,EAASQ,KAAK6B,UAAU,sBAAqB,CACvFb,QAAS,M,kDAIXc,QAAQC,IAAGjC,EAAAkC,I,kCAyCjB,IACiCf,EAAvBC,C,iCAzFuB3B,G,iCAmD3B0C,EAAkB,W,MAAG9C,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAIvBC,E,yEAHRT,EAAYa,MAAQ,E,kBAGKb,EAAYc,qB,aAA7BL,EAAQM,EAAAC,MAECC,KAAK6B,WAAa9C,EAAY4B,SAAS5B,EAAYa,MAAI,C,uBAElEhB,EAAUsD,mBAAmB,aAAa,EAAAtB,EAAAC,SAAmBrB,EAASQ,KAAKC,OAE3Ea,IAEAjC,EAAc0B,UAAUC,IAAI,aAE5BrB,EAAAgB,GAASC,OAAOC,KAAK,6DAA8D,CACjFW,QAAS,M,2BAKbpC,EAAUsD,mBAAmB,aAAa,EAAAtB,EAAAC,SAAmBrB,EAASQ,KAAKC,OAE3Ea,I,kDAGAgB,QAAQC,IAAGjC,EAAAkC,I,0EAzBgBzC,G,gCAAT,GA6BlBuB,EAAc,WAKlB,OAJiB,IAAI3B,EAAAgD,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,K,EAgBlB5D,EAAa6D,iBAAiB,SAAUpD,GACxCL,EAAcyD,iBAAiB,QAASL,E","sources":["src/js/gallery.js"],"sourcesContent":["import { UnsplashAPI } from './unsplash-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst userInput = document.querySelector('.js-search-input');\nconst unsplashAPI = new UnsplashAPI();\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  unsplashAPI.query = userInput.value;\n  unsplashAPI.page = 1;\n\n  try { \n    const response = await unsplashAPI.fetchPhotosByQuery();\n\n      if (response.data.hits.length === 0) { //Якщо не коректний запрос повертаэться масив з length = 0, тоді очищаємо форму, ховаємо кнопку, очищуємо Input\n        \n        Notiflix.Notify.info(\"Sorry, there are no images matching your search query. Please try again.\");\n\n        galleryEl.innerHTML = ''; \n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        event.target.reset();\n        return;\n      }\n\n      if(response.data.hits.length < unsplashAPI.per_page) {\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        galleryEl.innerHTML = createGalleryCards(response.data.hits);\n\n        modalWindow();\n\n        Notiflix.Notify.failure(\"We're sorry, but you've reached the end of search results.\", {\n          timeout: 3000,\n        });\n        return;\n      }\n\n      galleryEl.innerHTML = createGalleryCards(response.data.hits);\n\n      scrollOnButton();\n      modalWindow();\n\n      loadMoreBtnEl.classList.remove('is-hidden');\n\n      Notiflix.Notify.success(`Hooray! We found ${response.data.totalHits} totalHits images.`, {\n        timeout: 3000,\n      },);\n\n    } catch(err) {\n      console.log(err);\n    };\n};\n\nconst onLoadMoreBtnClick = async event => {\n  unsplashAPI.page += 1;\n\n  try {\n    const response = await unsplashAPI.fetchPhotosByQuery();\n\n      if (response.data.totalHits <= unsplashAPI.per_page*unsplashAPI.page) {\n\n        galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(response.data.hits));\n\n        modalWindow();\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\", {\n          timeout: 3000,\n        }, );\n        return;\n      }\n      \n      galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(response.data.hits));\n\n      modalWindow();\n\n    } catch(err) {\n      console.log(err);\n    };\n};\n\nconst modalWindow = function() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 300,\n  });\n  return lightbox;\n};\n\nfunction scrollOnButton() {\n  const { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["$bpxeT","parcelRequire","$6756f0db6f988caf$var$searchFormEl","document","querySelector","$6756f0db6f988caf$var$galleryEl","$6756f0db6f988caf$var$loadMoreBtnEl","$6756f0db6f988caf$var$userInput","$6756f0db6f988caf$var$unsplashAPI","$dgVK0","UnsplashAPI","$6756f0db6f988caf$var$onSearchFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","event","response","preventDefault","query","value","page","fetchPhotosByQuery","_ctx","sent","data","hits","length","$iU1Pc","Notify","info","innerHTML","classList","add","target","reset","per_page","$86MAb","default","$6756f0db6f988caf$var$modalWindow","failure","timeout","ref","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","remove","success","concat","totalHits","console","log","t0","$6756f0db6f988caf$var$onLoadMoreBtnClick","insertAdjacentHTML","$5IjG7","captionsData","captionDelay","addEventListener"],"version":3,"file":"index.197aaba0.js.map"}